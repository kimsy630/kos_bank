<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace = "spring.mvc.teamProject.persistence.LoanCenterDAO">
	<!-- ============================================================================ -->
	<!-- 박서하 -->
	<select id="getLoanAccountList" resultType="spring.mvc.teamProject.vo.LoansVO"> <!-- 대출계좌 조회 -->
		SELECT l.d_name, l.d_repay, l.account, l.d_rate, l.d_amount, l.d_start_date, l.d_end_date, l.d_balance, d_month, d_next_rate, d_ERR
		 FROM account_info i, loans l
		 WHERE i.account = l.account
		 AND i.id=#{id}
		 AND l.d_state=1 <!-- d_state=1 : 정상대출계좌 -->
	</select>
	
	<select id="getLoanAccountDetail" resultType="spring.mvc.teamProject.vo.LoansVO"> <!-- 대출계좌 상세조회 -->
		SELECT l.d_name, l.d_repay, l.d_amount, l.d_balance, l.d_month, l.account, l.d_rate, l.d_start_date, l.d_end_date, d_next_rate
		 FROM account_info i, loans l
		 WHERE i.account = l.account
		 AND i.id=#{id}
		 AND l.d_name=#{d_name}
		 AND l.d_state=1 <!-- d_state=1 : 정상대출계좌 -->
	</select>
	
	<select id="getLoanCloseList" resultType="spring.mvc.teamProject.vo.LoansVO"> <!-- 대출해지현황 조회 -->
		SELECT l.d_name, l.account, l.d_start_date, l.d_end_date
		 FROM account_info i, loans l
		 WHERE i.account = l.account
		 AND i.id=#{id}
		 AND l.d_state=2 <!-- d_state=2 : 해지대출계좌 -->
	</select>
	
	<select id="getLoanCloseDetail" resultType="spring.mvc.teamProject.vo.LoansVO"> <!-- 대출해지현황 상세조회 -->
		SELECT l.d_name, l.d_repay, l.d_amount, l.account, l.d_rate, l.d_start_date, l.d_end_date
		 FROM account_info i, loans l
		 WHERE i.account = l.account
		 AND i.id=#{id}
		 AND l.d_name=#{d_name}
		 AND l.d_state=2 <!-- d_state=2 : 해지대출계좌 -->
	</select>
	
	<select id="getLoanPrincipal" resultType="spring.mvc.teamProject.vo.LoansVO"> <!-- 대출원금 예상(내부정보) -->
		SELECT d_amount, d_month, d_ERR
		 FROM Loans
		 WHERE account = #{account}
	</select>
	<!-- ============================================================================ -->
</mapper>